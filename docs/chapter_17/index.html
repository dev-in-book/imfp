<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/imfp/blog/rss.xml" title="쏙쏙 들어오는 함수형 코딩 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/imfp/blog/atom.xml" title="쏙쏙 들어오는 함수형 코딩 Atom Feed"><title data-react-helmet="true">17장 타임라인 조율하기 | 쏙쏙 들어오는 함수형 코딩</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://dev-in-book.github.io/imfp/docs/chapter_17"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="17장 타임라인 조율하기 | 쏙쏙 들어오는 함수형 코딩"><meta data-react-helmet="true" name="description" content="이번 장에서 살펴볼 내용"><meta data-react-helmet="true" property="og:description" content="이번 장에서 살펴볼 내용"><link data-react-helmet="true" rel="shortcut icon" href="/imfp/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://dev-in-book.github.io/imfp/docs/chapter_17"><link data-react-helmet="true" rel="alternate" href="https://dev-in-book.github.io/imfp/docs/chapter_17" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dev-in-book.github.io/imfp/docs/chapter_17" hreflang="x-default"><link rel="stylesheet" href="/imfp/assets/css/styles.d38bc320.css">
<link rel="preload" href="/imfp/assets/js/runtime~main.e783e59b.js" as="script">
<link rel="preload" href="/imfp/assets/js/main.072c7238.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/imfp/"><div class="navbar__logo"><img src="/imfp/img/imfp.jpeg" alt="dev-in-book" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/imfp/img/imfp.jpeg" alt="dev-in-book" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">함수형 코딩</b></a><a class="navbar__item navbar__link navbar__link--active" href="/imfp/docs/chapter_3">📕 시작하기</a><a class="navbar__item navbar__link" href="/imfp/blog">👨‍👩‍👧‍👦 참여자</a></div><div class="navbar__items navbar__items--right"><a href="https://github.dev/dev-in-book/imfp" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>⛳️ GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_3">3장 액션과 계산, 데이터의 차이를 알기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_4">4장 액션에서 계산 빼내기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_5">5장 더 좋은 액션 만들기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_6">6장 변경 가능한 데이터 구조를 가진 언어에서 불변성 유지하기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_7">7장 신뢰할 수 없는 코드를 쓰면서 불변성 지키기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_8">8장 계층형 설계 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_9">9장 계층형 설계 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_10">10장 일급 함수 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_11">11장 일급 함수 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_12">12장 함수형 반복</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_13">13장 함수형 도구 체이닝</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_14">14장 중첩된 데이터에 함수형 도구 사용하기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_15">15장 타임라인 격리하기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_16">16장 타임라인 사이에 자원 공유하기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/imfp/docs/chapter_17">17장 타임라인 조율하기</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>17장 타임라인 조율하기</h1></header><section><span class="title_aw9g">written by</span><div class="authors_D0Uc"><div class="author_wC7X"><a href="https://github.com/jtree03" target="_blank" rel="noopener noreferrer" class="avatar__link_Mc9C"><img src="https://github.com/jtree03.png" alt="Jtree03" class="avatar__photo_y+NV"></a><div class="avatar__info_oz+C"><span class="bold_xdb6">Jtree03<!-- --> <!-- --> 🏆</span><span>Software Engineer</span></div></div></div></section><h2 class="anchor anchorWithStickyNavbar_y2LR" id="이번-장에서-살펴볼-내용">이번 장에서 살펴볼 내용<a aria-hidden="true" class="hash-link" href="#이번-장에서-살펴볼-내용" title="Direct link to heading">​</a></h2><ul><li>타임라인을 조율하기 위한 동시성 기본형을 만들어 봅니다.</li><li>시간에 관한 중요한 관점인 순서와 반복을 함수형 개발자들이 어떻게 다루는지 배웁니다.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="좋은-타임라인의-원칙">좋은 타임라인의 원칙<a aria-hidden="true" class="hash-link" href="#좋은-타임라인의-원칙" title="Direct link to heading">​</a></h2><ol><li>타임라인은 적을수록 이해하기 쉽습니다.</li><li>타임라인은 짧을수록 이해하기 쉽습니다.</li><li>공유하는 자원이 적을수록 이해하기 쉽습니다.</li><li>자원을 공유한다면 서로 조율해야 합니다.</li><li>시간을 일급으로 다룹니다.</li></ol><p>이번 장에서는 다섯번째 원칙을 보겠습니다.
이제부터 시간을 다룰 수 있는 대상으로 생각해야 합니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="버그가-있습니다">버그가 있습니다!<a aria-hidden="true" class="hash-link" href="#버그가-있습니다" title="Direct link to heading">​</a></h2><p>장바구니에 큐를 적용해서 배포한 후 UI 반응 속도를 개선해달라는 요청이 많이 있었습니다.
그래서 장바구니에 대한 속도 개선과 제품 추가 버튼에 대한 최적화를 했습니다.
그러자 다음과 같은 버그가 발생하였습니다.</p><p>장바구니 추가 버튼 클릭 -&gt; 의도한 결과는 상품 금액 + 배송비 금액 -&gt; 하지만 배송비 금액만 추가가 됨</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="코드가-어떻게-바뀌었나요">코드가 어떻게 바뀌었나요<a aria-hidden="true" class="hash-link" href="#코드가-어떻게-바뀌었나요" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculateCartTotal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">callback</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">costAjax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &lt;- 2. 여기로 옮겼습니다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">shippingAjax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shipping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> shipping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// }); &lt;- 1. 원래 여기에 있던 괄호를</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>즉, 상품 금액 계산 후 배송비를 계산하도록 한 로직을 상품 금액 계산과 배송비 계산 로직이 동시에 수행됩니다.
비동기적으로 작동하면 속도는 빨라지지만 타이밍을 맞춰지지 않게 되었습니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="액션을-확인하기-단계-1">액션을 확인하기: 단계 1<a aria-hidden="true" class="hash-link" href="#액션을-확인하기-단계-1" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addItemToCart</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cart</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  updateTotalQueue</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">4</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculateCartTotal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">callback</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> total</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">5</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  costAjax</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">6</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">7</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  shippingAjax</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">8</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shipping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">9</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> shipping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">10</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculateCartWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">done</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">calculateCartTotal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateTotalDOM</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>코드에 있는 액션에 표시를 합니다. (여기서 숫자는 순서가 아닌 일련번호입니다.)</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="모든-액션을-그리기-단계-2">모든 액션을 그리기: 단계 2<a aria-hidden="true" class="hash-link" href="#모든-액션을-그리기-단계-2" title="Direct link to heading">​</a></h2><table><thead><tr><th>클릭핸들러</th><th>큐</th><th>costAjax</th><th>shippingAjax</th></tr></thead><tbody><tr><td>1: cart 읽기</td><td></td><td></td><td></td></tr><tr><td>2: cart 쓰기</td><td></td><td></td><td></td></tr><tr><td>3: cart 읽기</td><td></td><td></td><td></td></tr><tr><td>4: updateTotalQueue 호출</td><td></td><td></td><td></td></tr><tr><td></td><td>5: total 초기화</td><td></td><td></td></tr><tr><td></td><td>6: costAjax 호출</td><td></td><td></td></tr><tr><td></td><td>8: shippingAjax 호출</td><td>7: total 읽기</td><td></td></tr><tr><td></td><td></td><td>7: total 쓰기</td><td></td></tr><tr><td></td><td></td><td></td><td>9: total 읽기</td></tr><tr><td></td><td></td><td></td><td>9: total 쓰기</td></tr><tr><td></td><td></td><td></td><td>10: total 읽기</td></tr><tr><td></td><td></td><td></td><td>11: updateTotalDOM 호출</td></tr></tbody></table><p>코드에서 확인한 액션 모두 다이어그램에 그렸습니다.
자바스크립트에서 다이어그램을 단순화하기 위한 두단계를 적용해 봅시다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="다이어그램-단순화하기-단계-3">다이어그램 단순화하기: 단계 3<a aria-hidden="true" class="hash-link" href="#다이어그램-단순화하기-단계-3" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="자바스크립트에서-단순화하기-위한-두-단계">자바스크립트에서 단순화하기 위한 두 단계<a aria-hidden="true" class="hash-link" href="#자바스크립트에서-단순화하기-위한-두-단계" title="Direct link to heading">​</a></h3><ol><li>액션을 통합합니다.</li><li>타임라인을 통합합니다.</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="액션-통합">액션 통합<a aria-hidden="true" class="hash-link" href="#액션-통합" title="Direct link to heading">​</a></h3><table><thead><tr><th>클릭핸들러</th><th>큐</th><th>costAjax</th><th>shippingAjax</th></tr></thead><tbody><tr><td>1, 2, 3, 4</td><td></td><td></td><td></td></tr><tr><td></td><td>5, 6, 8</td><td></td><td></td></tr><tr><td></td><td></td><td>7</td><td></td></tr><tr><td></td><td></td><td></td><td>9, 10, 11</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="타임라인-통합">타임라인 통합<a aria-hidden="true" class="hash-link" href="#타임라인-통합" title="Direct link to heading">​</a></h3><table><thead><tr><th>클릭핸들러, 큐</th><th>costAjax</th><th>shippingAjax</th></tr></thead><tbody><tr><td>1, 2, 3, 4</td><td></td><td></td></tr><tr><td>5, 6, 8</td><td></td><td></td></tr><tr><td></td><td>7</td><td></td></tr><tr><td></td><td></td><td>9, 10, 11</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_y2LR" id="실행-가능한-순서-분석하기">실행 가능한 순서 분석하기<a aria-hidden="true" class="hash-link" href="#실행-가능한-순서-분석하기" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="costajax-와-shippingajax-의-가능한-실행-순서">costAjax 와 shippingAjax 의 가능한 실행 순서<a aria-hidden="true" class="hash-link" href="#costajax-와-shippingajax-의-가능한-실행-순서" title="Direct link to heading">​</a></h3><ol><li>동시: 자바스크립트 스레드 모델로는 불가능합니다.</li><li>costAjax 먼저: 버그가 아닌 기대하는 동작입니다.</li><li>shippingAjax 먼저: 기대하지 않는 동작이므로 조치가 필요합니다.</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="왜-지금-타임라인이-더-빠를까요">왜 지금 타임라인이 더 빠를까요?<a aria-hidden="true" class="hash-link" href="#왜-지금-타임라인이-더-빠를까요" title="Direct link to heading">​</a></h2><p>병렬로 진행하기 때문입니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="모든-병렬-콜백-기다리기">모든 병렬 콜백 기다리기<a aria-hidden="true" class="hash-link" href="#모든-병렬-콜백-기다리기" title="Direct link to heading">​</a></h2><p>병렬을 기다는 선을 컷이라고 부릅니다.
이 컷이라는 부분을 구현하면 됩니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="타임라인을-나누기-위한-동시성-기본형">타임라인을 나누기 위한 동시성 기본형<a aria-hidden="true" class="hash-link" href="#타임라인을-나누기-위한-동시성-기본형" title="Direct link to heading">​</a></h2><p>경쟁 조건을 막으면 됩니다.
경쟁 조건은 어떤 동작이 먼저 끝나는 타임라인에 의존할 때 발생합니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="코드에-cut-적용하기">코드에 Cut() 적용하기<a aria-hidden="true" class="hash-link" href="#코드에-cut-적용하기" title="Direct link to heading">​</a></h2><p>두가지만 고민하면 됩니다.</p><ol><li>Cut() 을 보관할 범위</li><li>Cut() 에 어떤 콜백을 넣을지</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculateCartTotal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">callback</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> done </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Cut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">costAjax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">shippingAjax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shipping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> shipping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Cut 안의 숫자 2는 두번의 호출을 기다리겠다라는 의미입니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="불확실한-순서-분석하기">불확실한 순서 분석하기<a aria-hidden="true" class="hash-link" href="#불확실한-순서-분석하기" title="Direct link to heading">​</a></h2><ol><li>동시: 자바스크립트 스레드 모델로는 불가능합니다.</li><li>costAjax 먼저: done 두번을 기다리니 기대한 결과가 나타납니다.</li><li>shippingAjax 먼저: done 두번을 기다리니 기대한 결과가 나타납니다.</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="병렬-실행-분석">병렬 실행 분석<a aria-hidden="true" class="hash-link" href="#병렬-실행-분석" title="Direct link to heading">​</a></h2><table><thead><tr><th>클릭핸들러, 큐</th><th>costAjax</th><th>shippingAjax</th></tr></thead><tbody><tr><td>1, 2, 3, 4</td><td></td><td></td></tr><tr><td>5, 6, 8</td><td></td><td></td></tr><tr><td></td><td>7</td><td>9</td></tr><tr><td></td><td>10, 11</td><td></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_y2LR" id="여러-번-클릭하는-경우-분석">여러 번 클릭하는 경우 분석<a aria-hidden="true" class="hash-link" href="#여러-번-클릭하는-경우-분석" title="Direct link to heading">​</a></h2><p>클릭1 다이어그램, 클릭2 다이어그램, 큐 다이어그램만 존재하므로 정상적으로 작동합니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="딱-한-번만-호출하는-기본형">딱 한 번만 호출하는 기본형<a aria-hidden="true" class="hash-link" href="#딱-한-번만-호출하는-기본형" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">JustOnce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">VoidFunction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> alreadyCalled </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">args</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">alreadyCalled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alreadyCalled </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sendAddToCartText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">phone</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">sendTextAjax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">phone</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Thank you&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sendAddToCartTextOnce </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">JustOnce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sendAddToCartText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sendAddToCartTextOnce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;010-1234-5678&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sendAddToCartTextOnce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;010-1234-5678&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sendAddToCartTextOnce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;010-1234-5678&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sendAddToCartTextOnce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;010-1234-5678&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>몇번을 호출해도 한번만 실행합니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="암묵적-시간-모델-vs-명시적-시간-모델">암묵적 시간 모델 vs 명시적 시간 모델<a aria-hidden="true" class="hash-link" href="#암묵적-시간-모델-vs-명시적-시간-모델" title="Direct link to heading">​</a></h2><p>자바스크립트 시간 모델은 간단합니다.</p><ol><li>순차적 구문은 순서대로 실행됩니다.</li><li>두 타임라인에 있는 단계는 왼쪽 먼저 실행되거나, 오른쪽 먼저 실행될 수 있습니다.</li><li>비동기 이벤트는 새로운 타임라인에서 실행됩니다.</li><li>액션은 호출할 때마다 실행됩니다.</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="요약-타임라인-사용하기">요약: 타임라인 사용하기<a aria-hidden="true" class="hash-link" href="#요약-타임라인-사용하기" title="Direct link to heading">​</a></h2><ul><li>타임라인 수를 줄입니다.</li><li>타임라인 길이를 줄입니다.</li><li>공유 자원을 없앱니다.</li><li>동시성 기본형으로 자원을 공유합니다.</li><li>동시성 기본형으로 조율합니다.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="결론">결론<a aria-hidden="true" class="hash-link" href="#결론" title="Direct link to heading">​</a></h2><p>이 장에서 웹 요청의 시간 차이 때문에 발생하는 경쟁 조건에 대해 알아보았습니다.
요청한 순서대로 응답이 도착하는 것이 보장되지 않으니
Promise 나 Cut 을 사용합시다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="요점-정리">요점 정리<a aria-hidden="true" class="hash-link" href="#요점-정리" title="Direct link to heading">​</a></h2><ul><li>함수형 개발자는 언어가 제공하는 암묵적 시간 모델 대신 새로운 시간 모델을 만들어 사용합니다.</li><li>명시적 시간 모델은 종종 일급 값으로 만듭니다.</li><li>타임라인을 조율하기 위해 동시성 기본형을 만들 수 있습니다.</li><li>타임라인을 나누는 것도 타임라인을 조율하는 방법 중 하나입니다.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.dev/dev-in-book/imfp/blob/main/docs/15-chapter_17.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/imfp/docs/chapter_16"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->16장 타임라인 사이에 자원 공유하기</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#이번-장에서-살펴볼-내용" class="table-of-contents__link toc-highlight">이번 장에서 살펴볼 내용</a></li><li><a href="#좋은-타임라인의-원칙" class="table-of-contents__link toc-highlight">좋은 타임라인의 원칙</a></li><li><a href="#버그가-있습니다" class="table-of-contents__link toc-highlight">버그가 있습니다!</a></li><li><a href="#코드가-어떻게-바뀌었나요" class="table-of-contents__link toc-highlight">코드가 어떻게 바뀌었나요</a></li><li><a href="#액션을-확인하기-단계-1" class="table-of-contents__link toc-highlight">액션을 확인하기: 단계 1</a></li><li><a href="#모든-액션을-그리기-단계-2" class="table-of-contents__link toc-highlight">모든 액션을 그리기: 단계 2</a></li><li><a href="#다이어그램-단순화하기-단계-3" class="table-of-contents__link toc-highlight">다이어그램 단순화하기: 단계 3</a><ul><li><a href="#자바스크립트에서-단순화하기-위한-두-단계" class="table-of-contents__link toc-highlight">자바스크립트에서 단순화하기 위한 두 단계</a></li><li><a href="#액션-통합" class="table-of-contents__link toc-highlight">액션 통합</a></li><li><a href="#타임라인-통합" class="table-of-contents__link toc-highlight">타임라인 통합</a></li></ul></li><li><a href="#실행-가능한-순서-분석하기" class="table-of-contents__link toc-highlight">실행 가능한 순서 분석하기</a><ul><li><a href="#costajax-와-shippingajax-의-가능한-실행-순서" class="table-of-contents__link toc-highlight">costAjax 와 shippingAjax 의 가능한 실행 순서</a></li></ul></li><li><a href="#왜-지금-타임라인이-더-빠를까요" class="table-of-contents__link toc-highlight">왜 지금 타임라인이 더 빠를까요?</a></li><li><a href="#모든-병렬-콜백-기다리기" class="table-of-contents__link toc-highlight">모든 병렬 콜백 기다리기</a></li><li><a href="#타임라인을-나누기-위한-동시성-기본형" class="table-of-contents__link toc-highlight">타임라인을 나누기 위한 동시성 기본형</a></li><li><a href="#코드에-cut-적용하기" class="table-of-contents__link toc-highlight">코드에 Cut() 적용하기</a></li><li><a href="#불확실한-순서-분석하기" class="table-of-contents__link toc-highlight">불확실한 순서 분석하기</a></li><li><a href="#병렬-실행-분석" class="table-of-contents__link toc-highlight">병렬 실행 분석</a></li><li><a href="#여러-번-클릭하는-경우-분석" class="table-of-contents__link toc-highlight">여러 번 클릭하는 경우 분석</a></li><li><a href="#딱-한-번만-호출하는-기본형" class="table-of-contents__link toc-highlight">딱 한 번만 호출하는 기본형</a></li><li><a href="#암묵적-시간-모델-vs-명시적-시간-모델" class="table-of-contents__link toc-highlight">암묵적 시간 모델 vs 명시적 시간 모델</a></li><li><a href="#요약-타임라인-사용하기" class="table-of-contents__link toc-highlight">요약: 타임라인 사용하기</a></li><li><a href="#결론" class="table-of-contents__link toc-highlight">결론</a></li><li><a href="#요점-정리" class="table-of-contents__link toc-highlight">요점 정리</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/imfp/docs/chapter_3">함수형 코딩</a></li><li class="footer__item"><a class="footer__link-item" href="/imfp/blog/member">Member</a></li><li class="footer__item"><a href="https://github.dev/dev-in-book/imfp" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">2022 Dev in Book, Built with Docusaurus.</div></div></div></footer></div>
<script src="/imfp/assets/js/runtime~main.e783e59b.js"></script>
<script src="/imfp/assets/js/main.072c7238.js"></script>
</body>
</html>