<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/imfp/blog/rss.xml" title="쏙쏙 들어오는 함수형 코딩 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/imfp/blog/atom.xml" title="쏙쏙 들어오는 함수형 코딩 Atom Feed"><title data-react-helmet="true">15장 타임라인 격리하기 | 쏙쏙 들어오는 함수형 코딩</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://dev-in-book.github.io/imfp/docs/chapter_15"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="15장 타임라인 격리하기 | 쏙쏙 들어오는 함수형 코딩"><meta data-react-helmet="true" name="description" content="이번 장에서 살펴볼 내용"><meta data-react-helmet="true" property="og:description" content="이번 장에서 살펴볼 내용"><link data-react-helmet="true" rel="shortcut icon" href="/imfp/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://dev-in-book.github.io/imfp/docs/chapter_15"><link data-react-helmet="true" rel="alternate" href="https://dev-in-book.github.io/imfp/docs/chapter_15" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dev-in-book.github.io/imfp/docs/chapter_15" hreflang="x-default"><link rel="stylesheet" href="/imfp/assets/css/styles.7e9982d9.css">
<link rel="preload" href="/imfp/assets/js/runtime~main.5f17319d.js" as="script">
<link rel="preload" href="/imfp/assets/js/main.6d97276f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/imfp/"><div class="navbar__logo"><img src="/imfp/img/imfp.jpeg" alt="dev-in-book" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/imfp/img/imfp.jpeg" alt="dev-in-book" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">함수형 코딩</b></a><a class="navbar__item navbar__link navbar__link--active" href="/imfp/docs/chapter_3">📕 시작하기</a><a class="navbar__item navbar__link" href="/imfp/blog">👨‍👩‍👧‍👦 참여자</a></div><div class="navbar__items navbar__items--right"><a href="https://github.dev/dev-in-book/imfp" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>⛳️ GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_3">3장 액션과 계산, 데이터의 차이를 알기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_4">4장 액션에서 계산 빼내기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_5">5장 더 좋은 액션 만들기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_6">6장 변경 가능한 데이터 구조를 가진 언어에서 불변성 유지하기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_7">7장 신뢰할 수 없는 코드를 쓰면서 불변성 지키기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_8">8장 계층형 설계 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_9">9장 계층형 설계 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_10">10장 일급 함수 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_11">11장 일급 함수 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_12">12장 함수형 반복</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_13">13장 함수형 도구 체이닝</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/imfp/docs/chapter_14">14장 중첩된 데이터에 함수형 도구 사용하기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/imfp/docs/chapter_15">15장 타임라인 격리하기</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>15장 타임라인 격리하기</h1></header><section><span class="title_aw9g">written by</span><div class="authors_D0Uc"><div class="author_wC7X"><a href="https://github.com/positiveko" target="_blank" rel="noopener noreferrer" class="avatar__link_Mc9C"><img src="https://github.com/positiveko.png" alt="positiveko" class="avatar__photo_y+NV"></a><div class="avatar__info_oz+C"><span class="bold_xdb6">positiveko<!-- --> <!-- --> 🏆</span><span>Front End Engineer</span></div></div></div></section><h2 class="anchor anchorWithStickyNavbar_y2LR" id="이번-장에서-살펴볼-내용">이번 장에서 살펴볼 내용<a aria-hidden="true" class="hash-link" href="#이번-장에서-살펴볼-내용" title="Direct link to heading">​</a></h2><ul><li>코드를 타임라인 다이어그램으로 그리는 방법을 배웁니다.</li><li>버그를 찾기 위해 타임라인 다이어그램 보는 법을 이해합니다.</li><li>타임라인끼리 공유하는 자원을 줄여 코드 설계를 개선하는 방법을 알아봅니다.</li></ul><br> <br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="장바구니-버튼을-빠르게-두-번-클릭했을-때-일어나는-일">장바구니 버튼을 빠르게 두 번 클릭했을 때 일어나는 일<a aria-hidden="true" class="hash-link" href="#장바구니-버튼을-빠르게-두-번-클릭했을-때-일어나는-일" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">calc_cart_total</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cost_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">shipping_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shipping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> shipping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">update_total_dom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">add_item_to_cart</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cart </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add_item</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">calc_cart_total</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>빠르게 클릭했을 때 동일하지 않은 결과가 나왔다. 장바구니 금액이 계속 변화했다. <br>
이제 여기에서 왜 버그가 나타났는지, 어떻게 해결하는지 타임라인 다이어그램을 통해 알아보자.</p><br><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="두-가지-타임라인-다이어그램-기본-규칙">두 가지 타임라인 다이어그램 기본 규칙<a aria-hidden="true" class="hash-link" href="#두-가지-타임라인-다이어그램-기본-규칙" title="Direct link to heading">​</a></h2><blockquote><ol><li>두 액션이 순서대로 나타나면 같은 타임라인, <br></li><li>두 액션이 동시에 실행되거나 순서를 예상할 수 없다면 분리된 타임라인에 넣는다.</li></ol></blockquote><p>이런 규칙을 이용해 타임라인 다이어그램으로 그리면 코드가 시간이 지나며 어떻게 실행되는지 파악할 수 있다.</p><br><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="액션-순서에-관한-두-가지-사실">액션 순서에 관한 두 가지 사실<a aria-hidden="true" class="hash-link" href="#액션-순서에-관한-두-가지-사실" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-와-는-사실-3단계">1. ++와 +=는 사실 3단계!<a aria-hidden="true" class="hash-link" href="#1-와-는-사실-3단계" title="Direct link to heading">​</a></h3><p>400쪽을 보면 사실 <code>total++</code>라는 것이 3단계로 이루어진다고 설명한다.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> temp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> total</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 읽기 (액션)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> temp </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 더하기 (계산)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> temp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 쓰기 (액션)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>따라서! 다이어그램으로 그리게 되면 두 개의 액션으로 표시해야 한다. (읽기 + 쓰기)</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-인자는-함수를-부르기-전에-실행합니다">2. 인자는 함수를 부르기 전에 실행합니다.<a aria-hidden="true" class="hash-link" href="#2-인자는-함수를-부르기-전에-실행합니다" title="Direct link to heading">​</a></h3><p>인자는 함수에 전달되기 전에 실행되므로, 타임라인 다이어그램을 그릴 때에 순서대로 표현해야 한다.
<code>console.log(total)</code>이라는 코드는 아래와 같이 2단계로 일어난다. (total 읽기 + console.log())</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> temp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> total</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">temp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>이와 같은 2가지 액션 순서에 대한 배경 지식을 가지고 본격적으로 타임라인을 그려보도록 하자..</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="add-to-cart-타임라인-그리기">add-to-cart 타임라인 그리기<a aria-hidden="true" class="hash-link" href="#add-to-cart-타임라인-그리기" title="Direct link to heading">​</a></h2><p>타임라인을 그리는 단계는 3단계로 정리할 수 있다.</p><blockquote><ol><li>액션을 확인하고, <br></li><li>순서대로 실행되거나 동시에 실행되는 액션을 그린다.<br></li><li>마지막으로 플랫폼에 특화된 지식을 활용하여 다이어그램을 단순화한다.</li></ol></blockquote><br> <br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1단계-액션을-확인한다">1단계: 액션을 확인한다.<a aria-hidden="true" class="hash-link" href="#1단계-액션을-확인한다" title="Direct link to heading">​</a></h3><p><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/figure_14-3.png" alt="Identify the actions">
출처: <a href="https://livebook.manning.com/book/grokking-simplicity/chapter-15/1" target="_blank" rel="noopener noreferrer">https://livebook.manning.com/book/grokking-simplicity/chapter-15/1</a></p><p>밑줄 친 부분은 모두 액션. 계산은 다이어그램에 포함하지 않는다. (실행 순서와는 관련이 없으니!) <br>
총 13개의 액션 중에도 비동기 콜백 두 개가 보인다. (5번, 9번)</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="비동기-호출은-새로운-타임라인으로-그리자">비동기 호출은 새로운 타임라인으로 그리자<a aria-hidden="true" class="hash-link" href="#비동기-호출은-새로운-타임라인으로-그리자" title="Direct link to heading">​</a></h4><p>앞에서 비동기 콜백은 새로운 타임라인으로 그려야 한다는 것을 배웠다. <br>
여기서 자바스크립트 비동기 콜백이 어떻게 동작하는지 되짚어보자.</p><blockquote><ul><li>단일 스레드, 비동기: 스레드가 하나이기 때문에 입출력 작업을 하려면 비동기 모델 사용해야 함. 입출력의 결과는 콜백으로 받을 수 있으나
언제 끝날지 알 수 없기 때문에 타임라인을 분리해야 함.</li></ul></blockquote><h4 class="anchor anchorWithStickyNavbar_y2LR" id="한-단계씩-타임라인-만들기">한 단계씩 타임라인 만들기<a aria-hidden="true" class="hash-link" href="#한-단계씩-타임라인-만들기" title="Direct link to heading">​</a></h4><p>앞에서 이야기한 배경지식을 가지고 아래의 코드를 타임라인으로 만들어보자.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">saveUserAjax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setUserLoadingDOM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">setUserLoadingDOM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">saveDocumentAjax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setDocLoadingDOM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">setDocLoadingDOM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>결과물은 아래와 같다.</p><p><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0405-04.jpg" alt="1 step">
출처: <a href="https://livebook.manning.com/book/grokking-simplicity/chapter-15/1" target="_blank" rel="noopener noreferrer">https://livebook.manning.com/book/grokking-simplicity/chapter-15/1</a></p><br> <br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2단계-순서대로-실행되거나-동시에-실행되는-액션을-그린다">2단계: 순서대로 실행되거나 동시에 실행되는 액션을 그린다.<a aria-hidden="true" class="hash-link" href="#2단계-순서대로-실행되거나-동시에-실행되는-액션을-그린다" title="Direct link to heading">​</a></h3><p>이번에는 앞서 이야기 나눴던 장바구니 코드를 가지고 타임라인을 작성해보자.</p><p><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/figure_14-7.png" alt="2 step">
위와 같이 액션을 확인했다. 다이어그램을 그려보면 아래와 같다.</p><p><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0406-01.jpg" alt="2 step">
출처: <a href="https://livebook.manning.com/book/grokking-simplicity/chapter-15/1" target="_blank" rel="noopener noreferrer">https://livebook.manning.com/book/grokking-simplicity/chapter-15/1</a></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="타임라인-다이어그램으로-순서대로-실행되는-코드에도-두-가지-종류가-있다는-것을-알-수-있다">타임라인 다이어그램으로 순서대로 실행되는 코드에도 두 가지 종류가 있다는 것을 알 수 있다.<a aria-hidden="true" class="hash-link" href="#타임라인-다이어그램으로-순서대로-실행되는-코드에도-두-가지-종류가-있다는-것을-알-수-있다" title="Direct link to heading">​</a></h4><table><thead><tr><th>순서가 섞일 수 있는 코드</th><th>순서가 섞이지 않는 코드</th></tr></thead><tbody><tr><td><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0407-01.jpg"></td><td><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0407-02.jpg"></td></tr></tbody></table><p>왼쪽은 다른 타임라인에 있는 액션이 끼어들 수 있는 반면 오른쪽에서는 그런 일이 발생하지 않는다. 따라서 타임라인을 짧게, 즉 박스를 더 적게 가져가는 것이 관리하기 쉽다.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="타임라인-다이어그램으로-동시에-실행되는-코드는-순서를-예측할-수-없다는-것을-알-수-있다">타임라인 다이어그램으로 동시에 실행되는 코드는 순서를 예측할 수 없다는 것을 알 수 있다.<a aria-hidden="true" class="hash-link" href="#타임라인-다이어그램으로-동시에-실행되는-코드는-순서를-예측할-수-없다는-것을-알-수-있다" title="Direct link to heading">​</a></h4><p>타임라인에서 나란히 표현된 액션은 정확한 순서를 예측할 수 없다. 타임라인이 하나라면 실행 가능한 순서는 하나이겠지만 박스가 많아질수록, 타임라인이 늘어날수록
예상 가능한 실행 순서는 배로 늘어난다는 사실을 알아야 한다.</p><p><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0408-02.jpg" alt="Timeline diagrams capture the uncertain ordering of parallel code">
출처: <a href="https://livebook.manning.com/book/grokking-simplicity/chapter-15/1" target="_blank" rel="noopener noreferrer">https://livebook.manning.com/book/grokking-simplicity/chapter-15/1</a></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="좋은-타임라인의-원칙">좋은 타임라인의 원칙<a aria-hidden="true" class="hash-link" href="#좋은-타임라인의-원칙" title="Direct link to heading">​</a></h4><ol><li>타임라인은 적을수록 이해하기 쉽다.<blockquote><p>하지만 요즘의 시스템은 어쩔 수 없이 여러 타임라인이 존재한다.</p></blockquote></li><li>타임라인은 짧을수록 이해하기 쉽다.<blockquote><p>그래야 실행 가능한 순서의 수도 줄어드니까!</p></blockquote></li><li>공유하는 자원이 적을수록 이해하기 쉽다.<blockquote><p>서로 자원을 공유하지 않는다면 실행 순서를 신경 쓸 필요가 없으니까!</p></blockquote></li><li>자원을 공유해야 한다면 서로 조율해야 한다.<blockquote><p>피할 수 없다면 안전하게라도 공유해라. 즉 올바른 순서대로 자원을 쓰고 돌려줘라.</p></blockquote></li><li>시간을 일급으로 다룬다.<blockquote><p>재사용 가능한 객체를 만들면 타이밍 문제를 쉽게 만들 수 있는데~ 요거는 다음 시간 북리더가 설명해줄 것..</p></blockquote></li></ol><br> <br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3단계-타임라인-단순화하기">3단계: 타임라인 단순화하기<a aria-hidden="true" class="hash-link" href="#3단계-타임라인-단순화하기" title="Direct link to heading">​</a></h3><p>우리는 자바스크립트가 비동기를 어떻게 처리하는지 알고 있다. 따라서 넘어가겠다.</p><blockquote><ol><li>자바스크립트는 싱글스레드 언어이기 때문에 하나의 타임라인에 있는 모든 액션을 하나로 통합할 수 있었다.
<img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0415-02.jpg" alt="Consolidate all actions on a single timeline"></li><li>그리고 타임라인이 끝나는 곳에서 새로운 타임라인이 하나 생긴다면 통합할 수 있다.
하지만 이 경우 첫 번째 타임라인이 끝나는 곳에 새로운 타임라인이 2개 생기므로 통합하지 않았다.
이런 경우 예상 가능한 실행 순서는 2가지다.</li></ol></blockquote><p><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0420-03.jpg" alt="Consolidate all actions on a single timeline">
출처: <a href="https://livebook.manning.com/book/grokking-simplicity/chapter-15/1" target="_blank" rel="noopener noreferrer">https://livebook.manning.com/book/grokking-simplicity/chapter-15/1</a></p><p>이번에는 <code>add-to-cart</code> 타임라인을 똑같은 과정을 거쳐 단순화해보자.</p><blockquote><ol><li>자바스크립트는 싱글스레드 언어이기 때문에 하나의 타임라인에 있는 모든 액션을 하나로 통합할 수 있었다.
<img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0423-01.jpg" alt="Consolidate all actions on a single timeline"></li><li>그리고 타임라인이 끝나는 곳에서 새로운 타임라인이 하나 생긴다면 통합할 수 있다.
<img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0423-02.jpg" alt="Consolidate all actions on a single timeline"></li></ol></blockquote><br><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="타임라인을-나란히-보면-문제가-보인다">타임라인을 나란히 보면 문제가 보인다<a aria-hidden="true" class="hash-link" href="#타임라인을-나란히-보면-문제가-보인다" title="Direct link to heading">​</a></h2><p><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0429-01.jpg" alt="Two fast clicks can get the wrong result">
출처: <a href="https://livebook.manning.com/book/grokking-simplicity/chapter-15/1" target="_blank" rel="noopener noreferrer">https://livebook.manning.com/book/grokking-simplicity/chapter-15/1</a></p><p>실행 가능한 순서는 10가지. 어떻게 해결할 수 있을까?</p><br><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="공유하는-자원을-없애-문제를-해결하자">공유하는 자원을 없애 문제를 해결하자<a aria-hidden="true" class="hash-link" href="#공유하는-자원을-없애-문제를-해결하자" title="Direct link to heading">​</a></h2><p>결국 지금 발생하는 문제는 공유하는 자원 때문에 발생한다. 두 타임라인 모두 cart, total이라는 전역변수를 공유하기 때문에 실행 순서가 섞인 상태로 전역변수에 접근하며 버그가 발생하는 것.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-전역변수를-지역변수로-바꾸기">1) 전역변수를 지역변수로 바꾸기<a aria-hidden="true" class="hash-link" href="#1-전역변수를-지역변수로-바꾸기" title="Direct link to heading">​</a></h3><p>total을 먼저 지역변수로 바꾸자.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">calc_cart_total</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 전역변수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cost_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">shipping_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shipping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> shipping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">update_total_dom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">calc_cart_total</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 지역변수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cost_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">shipping_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shipping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> shipping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">update_total_dom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>total을 읽고 쓰는 동작은 더이상 액션이 아니기 때문에 타임라인에서 빠진다.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-전역변수를-인자로-바꾸기">2) 전역변수를 인자로 바꾸기<a aria-hidden="true" class="hash-link" href="#2-전역변수를-인자로-바꾸기" title="Direct link to heading">​</a></h3><p>암묵적 입력이 적은 액션이 더 좋다는 것을 앞에서 배웠다.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">calc_cart_total</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cost_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 암묵적 인자</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">shipping_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shipping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 암묵적 인자</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> shipping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">update_total_dom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">add_item_to_cart</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cart </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add_item</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">calc_cart_total</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">calc_cart_total</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cost_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 전역변수를 읽지 않음</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">shipping_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shipping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 전역변수를 읽지 않음</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> shipping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">update_total_dom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">add_item_to_cart</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cart </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add_item</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">calc_cart_total</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 인자로 바꾸기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img src="https://drek4537l1klr.cloudfront.net/normand/Figures/f0432-03.jpg" alt="There’s still a bug in this code."></p><p>하지만 아직 버그가 남아 있는데, DOM 자원을 공유하고 있다. 요것은 다음 북리더가 친절하게 설명해 주실 것이다...</p><blockquote><p>그래서 이제 이 함수는 계산이 아닌가요?</p><p>전역변수를 모두 없애긴 했지만 이 함수는 계산이 아니다. 서버에 두 번 접근하기 때문이다. 또한 DOM을 업데이트하는 부분도 있다.
둘 다 액션이기 때문에 아직은 계산이 아니지만.. 계산에 가까워졌다..!!<br>
따라서 이 함수는 실행 시점에 덜 의존하게 되었다.</p></blockquote><br><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="더-나아가-재사용하기-좋은-코드로-만들어보자">더 나아가 재사용하기 좋은 코드로 만들어보자<a aria-hidden="true" class="hash-link" href="#더-나아가-재사용하기-좋은-코드로-만들어보자" title="Direct link to heading">​</a></h2><p>4,5장에서 배운 것처럼 DOM을 바꾸는 것은 암묵적 출력이다. 하지만 비동기 콜백이 완료되어야 하기 때문에 리턴값으로는 전달할 수 없다.</p><p>이럴 때에는 아래와 같이 콜백 함수로 전달하면 된다.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">calc_cart_total</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">callback</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 콜백 인자로 바꾸기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">cost_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">shipping_ajax</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shipping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> shipping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">add_item_to_cart</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cart </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add_item</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quantity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">calc_cart_total</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> update_total_dom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="요점-정리">요점 정리<a aria-hidden="true" class="hash-link" href="#요점-정리" title="Direct link to heading">​</a></h2><ul><li>타임라인 === 동시에 실행될 수 있는 순차적 액션</li><li>서로 다른 타임라인에 있는 액션은 끼어들 수 있어서 여러 개의 실행 가능한 순서가 됨. 실행 가능한 순서가 많을 때 버그가 없는지 찾기 힘듦.</li><li>타임라인 다이어그램으로 서로 영향을 주고 받는 부분이 어디인지 알 수 있음.</li><li>언어에서 지원하는 스레드 모델을 이해해야 함. 분산 시스템에서 어떤 부분이 동시에 실행되고 순서대로 실행되는지 파악해야 함.</li><li>자원을 공유하는 부분은 버그가 나기 쉬움. 따라서 공유 자원을 최소화할 것.</li><li>자원을 공유하지 않는 타임라인은 독립적으로 이해하고 실행할 수 있음. 따라서 함께 생각해야 할 내용이 줄어듬.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.dev/dev-in-book/imfp/blob/main/docs/13-chapter_15.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/imfp/docs/chapter_14"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->14장 중첩된 데이터에 함수형 도구 사용하기</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#이번-장에서-살펴볼-내용" class="table-of-contents__link toc-highlight">이번 장에서 살펴볼 내용</a></li><li><a href="#장바구니-버튼을-빠르게-두-번-클릭했을-때-일어나는-일" class="table-of-contents__link toc-highlight">장바구니 버튼을 빠르게 두 번 클릭했을 때 일어나는 일</a></li><li><a href="#두-가지-타임라인-다이어그램-기본-규칙" class="table-of-contents__link toc-highlight">두 가지 타임라인 다이어그램 기본 규칙</a></li><li><a href="#액션-순서에-관한-두-가지-사실" class="table-of-contents__link toc-highlight">액션 순서에 관한 두 가지 사실</a><ul><li><a href="#1-와-는-사실-3단계" class="table-of-contents__link toc-highlight">1. ++와 +=는 사실 3단계!</a></li><li><a href="#2-인자는-함수를-부르기-전에-실행합니다" class="table-of-contents__link toc-highlight">2. 인자는 함수를 부르기 전에 실행합니다.</a></li></ul></li><li><a href="#add-to-cart-타임라인-그리기" class="table-of-contents__link toc-highlight">add-to-cart 타임라인 그리기</a><ul><li><a href="#1단계-액션을-확인한다" class="table-of-contents__link toc-highlight">1단계: 액션을 확인한다.</a></li><li><a href="#2단계-순서대로-실행되거나-동시에-실행되는-액션을-그린다" class="table-of-contents__link toc-highlight">2단계: 순서대로 실행되거나 동시에 실행되는 액션을 그린다.</a></li><li><a href="#3단계-타임라인-단순화하기" class="table-of-contents__link toc-highlight">3단계: 타임라인 단순화하기</a></li></ul></li><li><a href="#타임라인을-나란히-보면-문제가-보인다" class="table-of-contents__link toc-highlight">타임라인을 나란히 보면 문제가 보인다</a></li><li><a href="#공유하는-자원을-없애-문제를-해결하자" class="table-of-contents__link toc-highlight">공유하는 자원을 없애 문제를 해결하자</a><ul><li><a href="#1-전역변수를-지역변수로-바꾸기" class="table-of-contents__link toc-highlight">1) 전역변수를 지역변수로 바꾸기</a></li><li><a href="#2-전역변수를-인자로-바꾸기" class="table-of-contents__link toc-highlight">2) 전역변수를 인자로 바꾸기</a></li></ul></li><li><a href="#더-나아가-재사용하기-좋은-코드로-만들어보자" class="table-of-contents__link toc-highlight">더 나아가 재사용하기 좋은 코드로 만들어보자</a></li><li><a href="#요점-정리" class="table-of-contents__link toc-highlight">요점 정리</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/imfp/docs/chapter_3">함수형 코딩</a></li><li class="footer__item"><a class="footer__link-item" href="/imfp/blog/member">Member</a></li><li class="footer__item"><a href="https://github.dev/dev-in-book/imfp" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">2022 Dev in Book, Built with Docusaurus.</div></div></div></footer></div>
<script src="/imfp/assets/js/runtime~main.5f17319d.js"></script>
<script src="/imfp/assets/js/main.6d97276f.js"></script>
</body>
</html>